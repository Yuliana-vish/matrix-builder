(this["webpackJsonpmatrix-builder"]=this["webpackJsonpmatrix-builder"]||[]).push([[0],{41:function(t,e,n){},62:function(t,e,n){},63:function(t,e,n){"use strict";n.r(e);var r=n(1),s=n.n(r),c=n(8),a=n.n(c),i=n(3),o=(n(41),n(6)),u=n(2),l=n(10),j=n(24),m=n(25),b=n(31),d=n(30),O={SET_SETTINGS:"SET_SETTINGS",CREATE_MATRIX:"CREATE_MATRIX",INCREMENT_CELL:"INCREMENT_CELL",ADD_ROW:"ADD_ROW",DELETE_ROW:"DELETE_ROW",SET_NEAREST_CELLS:"SET_NEAREST_CELLS",RESET_NEAREST_CELLS:"RESET_NEAREST_CELLS"},x=n(4),f=n(64),h=function(){return{Amount:Math.floor(900*Math.random())+100,ID:Object(f.a)()}},E=function(t){if(t.columns&&t.rows){var e=new Array(t.columns*t.rows).fill(0).map((function(t,e){return h()}));console.log(e);for(var n=[],r=0,s=0;s<t.rows;s++)n=[].concat(Object(x.a)(n),[e.slice(r,t.columns*(s+1))]),r=t.columns*(s+1);return n}},v=function(t){return t.flat().map((function(t){return t})).sort((function(t,e){return t.Amount-e.Amount}))},p=function(t){return t.reduce((function(t,e){return t+Number(e.Amount)}),0)},N=function(t){return t.reduce((function(t,e){return t+Number(e)}),0)},w={addRow:function(t){return{type:O.ADD_ROW,payload:t}},deleteRow:function(t){return{type:O.DELETE_ROW,payload:t}},setSettings:function(t){var e=E(t),n=v(e);return{type:O.SET_SETTINGS,payload:{settings:t,matrix:e,sortedMatrix:n}}},incrementCell:function(t){return{type:O.INCREMENT_CELL,payload:t}},createMatrix:E,setNearestCells:function(t,e,n){var r=function(t,e,n){for(var r=[].concat(Object(x.a)(e)),s=[],c=0;c<t;c++){var a=r.map((function(t){return t.ID}));if(n){var i=void 0,o=a.indexOf(n.ID);if(0===o)i=r[1];else if(o===r.length-1)i=r[r.length-2];else{var u=r[o-1],l=r[o+1];i=n.Amount-u.Amount>l.Amount-n.Amount?l:u}r.splice(a.indexOf(i.ID),1),s.push(i)}}return s}(t,e,n);return{type:O.SET_NEAREST_CELLS,payload:{sortedMatrix:e,nearest:r}}},resetNearestCells:function(){return{type:O.RESET_NEAREST_CELLS}}},g=n(0),R=function(t){var e=t.addInputData,n=t.columns,r=t.rows,s=t.cells;return Object(g.jsxs)(g.Fragment,{children:[Object(g.jsxs)("div",{className:"form-input",children:[Object(g.jsx)("label",{className:"input-text",htmlFor:"/",children:"enter the number of columns"}),Object(g.jsx)("input",{type:"number",className:"input",name:"columns",min:"0",value:n,onChange:e})]}),Object(g.jsxs)("div",{className:"form-input",children:[Object(g.jsx)("label",{className:"input-text",htmlFor:"/",children:"enter the number of rows"}),Object(g.jsx)("input",{type:"number",className:"input",name:"rows",min:"0",value:r,onChange:e})]}),Object(g.jsxs)("div",{className:"form-input",children:[Object(g.jsx)("label",{className:"input-text",htmlFor:"/",children:"enter the number of cells"}),Object(g.jsx)("input",{type:"number",className:"input",name:"cells",min:"0",value:s,onChange:e})]}),Object(g.jsx)("div",{className:"btn-form",children:Object(g.jsx)("button",{className:"button btn-create",type:"submit",children:"create matrix"})})]})},S=function(t){Object(b.a)(n,t);var e=Object(d.a)(n);function n(){var t;Object(j.a)(this,n);for(var r=arguments.length,s=new Array(r),c=0;c<r;c++)s[c]=arguments[c];return(t=e.call.apply(e,[this].concat(s))).handleClick=function(e){var n=e.currentTarget,r=n.name,s=n.value;t.setState(Object(l.a)({},r,+s))},t.submitForm=function(e){e.preventDefault();var n={columns:t.state.columns,rows:t.state.rows,cells:t.state.cells};t.props.setSettings(n),console.log(n),t.reset()},t.reset=function(){t.setState({columns:"",rows:"",cells:""})},t}return Object(m.a)(n,[{key:"render",value:function(){return Object(g.jsx)(g.Fragment,{children:Object(g.jsxs)("form",{className:"/",onSubmit:this.submitForm,children:[Object(g.jsx)("h1",{className:"title",children:"Matrix builder"}),Object(g.jsx)(R,Object(u.a)({addInputData:this.handleClick},this.state))]})})}}]),n}(r.Component),T={setSettings:w.setSettings},C=Object(i.b)((function(t){return{settings:t.settings}}),T)(S),M=function(t){return Object(g.jsx)("th",{className:"header-item",children:t},t)},A=function(t){var e=function(t){for(var e=[M("\u2116")],n=0;n<t;n++)e.push(M(n+1));return e.push(M("Sum")),e}(t.columns);return Object(g.jsx)("thead",{className:"table-header",children:Object(g.jsx)("tr",{children:e})})},_=function(t){var e=t.columns,n=t.rows,s=t.matrixRows,c=Object(r.useState)(),a=Object(o.a)(c,2),i=a[0],u=a[1];return Object(r.useEffect)((function(){if(s){var t=function(t,e,n){for(var r=[],s=0;s<t;s++){for(var c=0,a=0;a<e;a++)c+=Number(n[a][s].Amount);r=[].concat(Object(x.a)(r),[Math.round(c/Number(e))])}return r}(e,n,s);u(t)}}),[e,n,s]),Object(g.jsxs)("tr",{children:[Object(g.jsx)("td",{className:"banner",children:"Avg"}),i&&i.map((function(t,e){return Object(g.jsx)("td",{className:"table-item",children:Object(g.jsx)("div",{className:"amount avg",children:t})},e)})),i&&Object(g.jsx)("td",{className:"table-item",children:Object(g.jsx)("div",{className:"amount avg",children:N(i)})})]})},y=function(t){var e=t.row,n=t.handleMouseEnter,s=t.handleMouseLeave,c=Object(r.useState)(p(e)),a=Object(o.a)(c,2),i=a[0],u=a[1];return Object(r.useEffect)((function(){u(p(e))}),[e]),Object(g.jsx)("td",{className:"table-item",onMouseEnter:n,onMouseLeave:s,children:Object(g.jsx)("div",{className:"amount sum",children:i})})},L=function(t){var e=t.item,n=t.row,s=Object(r.useState)(p(n)),c=Object(o.a)(s,2),a=c[0],i=c[1];Object(r.useEffect)((function(){i(p(n))}),[n]);var u=(100*e.Amount/a).toFixed();return Object(g.jsxs)("div",{className:"percent",children:[Object(g.jsxs)("div",{className:"percent-text",children:[u,"%"]}),Object(g.jsx)("div",{className:"column-percent",style:{height:u+"%"}})]})},D=n(26),I=n.n(D),k={incrementCell:w.incrementCell,setNearestCells:w.setNearestCells,resetNearestCells:w.resetNearestCells},F=Object(i.b)((function(t){return{nearest:t.matrix.nearest,sortedMatrix:t.matrix.sortedMatrix}}),k)((function(t){var e=t.item,n=t.incrementCell,r=t.cells,s=t.sortedMatrix,c=t.setNearestCells,a=t.resetNearestCells,i=t.nearest,o=function(){c(r,s,e)};return Object(g.jsx)("div",{className:I()("amount",{"nearest-item":i&&i.includes(e)}),onClick:function(){e.Amount<999&&(n(e),o())},onMouseEnter:o,onMouseLeave:function(){a()},children:e.Amount})})),W={deleteRow:w.deleteRow},G=Object(i.b)(null,W)((function(t){var e=t.index,n=t.deleteRow,r=function t(){n(e),console.log(t)};return Object(g.jsx)("td",{className:"banner",children:Object(g.jsx)("button",{className:"remove-button",type:"submit",onClick:function(){return r()},children:"x"})})})),J=Object(i.b)((function(t){return{columns:t.matrix.settings.columns,rows:t.matrix.settings.rows,cells:t.matrix.settings.cells,arr:t.matrix.arr,matrixRows:t.matrix.matrixRows,sortedMatrix:t.matrix.sortedMatrix}}))((function(t){var e=t.columns,n=t.rows,s=t.cells,c=t.matrixRows,a=Object(r.useState)(-1),i=Object(o.a)(a,2),u=i[0],l=i[1];return Object(g.jsxs)("tbody",{children:[!!c&&c.map((function(t,e){return Object(g.jsxs)("tr",{children:[Object(g.jsx)("td",{className:"banner",children:e+1}),t.map((function(n){return Object(g.jsx)("td",{className:"table-item",children:u===e?Object(g.jsx)(L,{item:n,row:t}):Object(g.jsx)(F,{item:n,cells:s})},n.Amount)})),Object(g.jsx)(y,{row:t,handleMouseEnter:function(){return l(e)},handleMouseLeave:function(){return l(-1)}}),Object(g.jsx)(G,{index:e,matrixRows:c,rows:n})]},JSON.stringify(t))})),Object(g.jsx)(_,{matrixRows:c,columns:e,rows:n})]})})),X={addRow:w.addRow},B=Object(i.b)((function(t){return{rows:t.matrix.settings.rows,matrixRows:t.matrix.matrixRows}}),X)((function(t){var e=t.addRow,n=t.matrixRows;return Object(g.jsx)("div",{className:"btn-matrix",children:Object(g.jsx)("button",{className:"button btn-addrow",type:"button",onClick:function(){return e(n),void console.log(e)},children:"add row"})})})),q=Object(i.b)((function(t){return{settings:t.matrix.settings}}))((function(t){var e=t.settings;return Object(g.jsxs)("div",{className:"table",children:[e.columns&&e.rows&&e.cells&&Object(g.jsx)(B,{}),Object(g.jsx)("table",{className:"table-matrix",children:e.columns&&e.rows&&e.cells&&Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(A,Object(u.a)({},e)),Object(g.jsx)(J,{})]})})]})})),z=n(15),H=n.n(z),K=n(27),P=function(t){var e=t.words,n=t.setWords,r=function(t){var e=Math.random().toString(36).slice(-1);return t.value+e};return Object(g.jsx)(g.Fragment,{children:e&&e.map((function(t){return Object(g.jsx)("div",{className:"words-title",onClick:function(){return function(t){n(e.map((function(e){return e.id===t.id?Object(u.a)(Object(u.a)({},e),{},{value:r(t)}):e})))}(t)},children:t.value},JSON.stringify(t))}))})},Q=n(28),U=n.n(Q),V=function(){var t=Object(r.useState)([]),e=Object(o.a)(t,2),n=e[0],s=e[1],c=function(){var t=Object(K.a)(H.a.mark((function t(){var e;return H.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,U.a.get("https://random-word-api.herokuapp.com/word?number=5");case 3:e=t.sent,s(e.data.map((function(t){return{value:t,id:Object(f.a)()}}))),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(){return t.apply(this,arguments)}}();return Object(g.jsx)(g.Fragment,{children:Object(g.jsxs)("div",{className:"random-words",children:[Object(g.jsx)("button",{className:"button btn-random",type:"submit",onClick:function(){c()},children:"get random words"}),Object(g.jsx)("div",{children:Object(g.jsx)(P,{words:n,setWords:s})})]})})},Y=(n(62),Object(i.b)((function(t){return{settings:t.matrix.settings}}))((function(t){var e=t.settings,n=Object(r.useState)(!1),s=Object(o.a)(n,2),c=s[0],a=s[1];return Object(r.useEffect)((function(){a(!0)}),[e]),Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)("section",{className:"section-form",children:Object(g.jsx)(C,{})}),Object(g.jsx)("section",{className:"section-table",children:c&&Object(g.jsx)(q,{})}),Object(g.jsx)("section",{className:"section-words",children:Object(g.jsx)(V,{})})]})}))),Z=n(11),$=n(29),tt={settings:{columns:"",rows:"",cells:""},matrixRows:[],sortedMatrix:[],nearest:[]},et=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:tt,e=arguments.length>1?arguments[1]:void 0,n=e.type,r=e.payload;switch(n){case O.SET_SETTINGS:return Object(u.a)(Object(u.a)({},t.settings),{},{settings:r.settings,matrixRows:r.matrix,sortedMatrix:r.sortedMatrix});case O.CREATE_MATRIX:return Object(u.a)(Object(u.a)({},t),{},{matrixRows:Object(x.a)(r)});case O.INCREMENT_CELL:var s=t.matrixRows.map((function(t){return t.map((function(t){return t.ID===r.ID?(t.Amount+=1,t):t}))}));return Object(u.a)(Object(u.a)({},t),{},{matrixRows:s,sortedMatrix:Object(x.a)(v(Object(x.a)(t.sortedMatrix)))});case O.DELETE_ROW:return Object(u.a)(Object(u.a)({},t),{},{sortedMatrix:Object(x.a)(v(Object(x.a)(t.sortedMatrix.filter((function(e){return t.matrixRows[r].every((function(t){return t.ID!==e.ID}))}))))),matrixRows:t.matrixRows.filter((function(t,e){return e!==r})),settings:Object(u.a)(Object(u.a)({},t.settings),{},{rows:t.settings.rows-1})});case O.ADD_ROW:var c=new Array(1*t.settings.columns).fill(0).map((function(){return h()}));return Object(u.a)(Object(u.a)({},t),{},{settings:Object(u.a)(Object(u.a)({},t.settings),{},{rows:t.settings.rows+1}),matrixRows:[].concat(Object(x.a)(t.matrixRows),[c]),sortedMatrix:Object(x.a)(v([].concat(Object(x.a)(t.sortedMatrix),Object(x.a)(c))))});case O.SET_NEAREST_CELLS:return Object(u.a)(Object(u.a)({},t),{},{nearest:Object(x.a)(r.nearest)});case O.RESET_NEAREST_CELLS:return Object(u.a)(Object(u.a)({},t),{},{nearest:tt.nearest});default:return t}},nt=Object(Z.combineReducers)({matrix:et}),rt=Object(Z.createStore)(nt,Object($.composeWithDevTools)());a.a.render(Object(g.jsx)(s.a.StrictMode,{children:Object(g.jsx)(i.a,{store:rt,children:Object(g.jsx)(Y,{})})}),document.getElementById("root"))}},[[63,1,2]]]);
//# sourceMappingURL=main.94f8a8d6.chunk.js.map