(this["webpackJsonpmatrix-builder"]=this["webpackJsonpmatrix-builder"]||[]).push([[0],{28:function(t,e,n){},30:function(t,e,n){},31:function(t,e,n){"use strict";n.r(e);var r=n(1),s=n.n(r),c=n(7),a=n.n(c),i=n(3),o=(n(28),n(5)),u=n(2),l=n(9),m=n(14),j=n(15),b=n(19),d=n(18),O={SET_SETTINGS:"SET_SETTINGS",CREATE_MATRIX:"CREATE_MATRIX",INCREMENT_CELL:"INCREMENT_CELL",ADD_ROW:"ADD_ROW",DELETE_ROW:"DELETE_ROW",SET_NEAREST_CELLS:"SET_NEAREST_CELLS",RESET_NEAREST_CELLS:"RESET_NEAREST_CELLS"},x=n(4),f=n(33),h=function(){return{Amount:Math.floor(900*Math.random())+100,ID:Object(f.a)()}},E=function(t){if(t.columns&&t.rows){var e=new Array(t.columns*t.rows).fill(0).map((function(t,e){return h()}));console.log(e);for(var n=[],r=0,s=0;s<t.rows;s++)n=[].concat(Object(x.a)(n),[e.slice(r,t.columns*(s+1))]),r=t.columns*(s+1);return n}},N=function(t){return t.flat().map((function(t){return t})).sort((function(t,e){return t.Amount-e.Amount}))},v=function(t){return t.reduce((function(t,e){return t+Number(e.Amount)}),0)},w=function(t){return t.reduce((function(t,e){return t+Number(e)}),0)},p={addRow:function(t){return{type:O.ADD_ROW,payload:t}},deleteRow:function(t){return{type:O.DELETE_ROW,payload:t}},setSettings:function(t){var e=E(t),n=N(e);return{type:O.SET_SETTINGS,payload:{settings:t,matrix:e,sortedMatrix:n}}},incrementCell:function(t){return{type:O.INCREMENT_CELL,payload:t}},createMatrix:E,setNearestCells:function(t,e,n){var r=function(t,e,n){for(var r=[].concat(Object(x.a)(e)),s=[],c=0;c<t;c++){var a=r.map((function(t){return t.ID}));if(n){var i=void 0,o=a.indexOf(n.ID);if(0===o)i=r[1];else if(o===r.length-1)i=r[r.length-2];else{var u=r[o-1],l=r[o+1];i=n.Amount-u.Amount>l.Amount-n.Amount?l:u}r.splice(a.indexOf(i.ID),1),s.push(i)}}return s}(t,e,n);return{type:O.SET_NEAREST_CELLS,payload:{sortedMatrix:e,nearest:r}}},resetNearestCells:function(){return{type:O.RESET_NEAREST_CELLS}}},R=n(0),S=function(t){var e=t.addInputData,n=t.columns,r=t.rows,s=t.cells;return Object(R.jsxs)(R.Fragment,{children:[Object(R.jsxs)("div",{className:"form-input",children:[Object(R.jsx)("label",{className:"input-text",htmlFor:"/",children:"enter the number of columns"}),Object(R.jsx)("input",{type:"number",className:"input",name:"columns",min:"0",value:n,onChange:e})]}),Object(R.jsxs)("div",{className:"form-input",children:[Object(R.jsx)("label",{className:"input-text",htmlFor:"/",children:"enter the number of rows"}),Object(R.jsx)("input",{type:"number",className:"input",name:"rows",min:"0",value:r,onChange:e})]}),Object(R.jsxs)("div",{className:"form-input",children:[Object(R.jsx)("label",{className:"input-text",htmlFor:"/",children:"enter the number of cells"}),Object(R.jsx)("input",{type:"number",className:"input",name:"cells",min:"0",value:s,onChange:e})]}),Object(R.jsx)("div",{className:"btn-form",children:Object(R.jsx)("button",{className:"button btn-create",type:"submit",children:"create matrix"})})]})},g=function(t){Object(b.a)(n,t);var e=Object(d.a)(n);function n(){var t;Object(m.a)(this,n);for(var r=arguments.length,s=new Array(r),c=0;c<r;c++)s[c]=arguments[c];return(t=e.call.apply(e,[this].concat(s))).handleClick=function(e){var n=e.currentTarget,r=n.name,s=n.value;t.setState(Object(l.a)({},r,+s))},t.submitForm=function(e){e.preventDefault();var n={columns:t.state.columns,rows:t.state.rows,cells:t.state.cells};t.props.setSettings(n),console.log(n),t.reset()},t.reset=function(){t.setState({columns:"",rows:"",cells:""})},t}return Object(j.a)(n,[{key:"render",value:function(){return Object(R.jsx)(R.Fragment,{children:Object(R.jsxs)("form",{className:"/",onSubmit:this.submitForm,children:[Object(R.jsx)("h1",{className:"title",children:"Matrix builder"}),Object(R.jsx)(S,Object(u.a)({addInputData:this.handleClick},this.state))]})})}}]),n}(r.Component),T={setSettings:p.setSettings},C=Object(i.b)((function(t){return{settings:t.settings}}),T)(g),M=function(t){return Object(R.jsx)("th",{className:"header-item",children:t},t)},A=function(t){var e=function(t){for(var e=[M("\u2116")],n=0;n<t;n++)e.push(M(n+1));return e.push(M("Sum")),e}(t.columns);return Object(R.jsx)("thead",{className:"table-header",children:Object(R.jsx)("tr",{children:e})})},_=function(t){var e=t.columns,n=t.rows,s=t.matrixRows,c=Object(r.useState)(),a=Object(o.a)(c,2),i=a[0],u=a[1];return Object(r.useEffect)((function(){if(s){var t=function(t,e,n){for(var r=[],s=0;s<t;s++){for(var c=0,a=0;a<e;a++)c+=Number(n[a][s].Amount);r=[].concat(Object(x.a)(r),[Math.round(c/Number(e))])}return r}(e,n,s);u(t)}}),[e,n,s]),Object(R.jsxs)("tr",{children:[Object(R.jsx)("td",{className:"banner",children:"Avg"}),i&&i.map((function(t,e){return Object(R.jsx)("td",{className:"table-item",children:Object(R.jsx)("div",{className:"amount avg",children:t})},e)})),i&&Object(R.jsx)("td",{className:"table-item",children:Object(R.jsx)("div",{className:"amount avg",children:w(i)})})]})},L=function(t){var e=t.row,n=t.handleMouseEnter,s=t.handleMouseLeave,c=Object(r.useState)(v(e)),a=Object(o.a)(c,2),i=a[0],u=a[1];return Object(r.useEffect)((function(){u(v(e))}),[e]),Object(R.jsx)("td",{className:"table-item",onMouseEnter:n,onMouseLeave:s,children:Object(R.jsx)("div",{className:"amount sum",children:i})})},y=function(t){var e=t.item,n=t.row,s=Object(r.useState)(v(n)),c=Object(o.a)(s,2),a=c[0],i=c[1];Object(r.useEffect)((function(){i(v(n))}),[n]);var u=(100*e.Amount/a).toFixed();return Object(R.jsxs)("div",{className:"percent",children:[Object(R.jsxs)("div",{className:"percent-text",children:[u,"%"]}),Object(R.jsx)("div",{className:"column-percent",style:{height:u+"%"}})]})},D=n(16),I=n.n(D),F={incrementCell:p.incrementCell,setNearestCells:p.setNearestCells,resetNearestCells:p.resetNearestCells},W=Object(i.b)((function(t){return{nearest:t.matrix.nearest,sortedMatrix:t.matrix.sortedMatrix}}),F)((function(t){var e=t.item,n=t.incrementCell,r=t.cells,s=t.sortedMatrix,c=t.setNearestCells,a=t.resetNearestCells,i=t.nearest,o=function(){c(r,s,e)};return Object(R.jsx)("div",{className:I()("amount",{"nearest-item":i&&i.includes(e)}),onClick:function(){e.Amount<999&&(n(e),o())},onMouseEnter:o,onMouseLeave:function(){a()},children:e.Amount})})),k={deleteRow:p.deleteRow},G=Object(i.b)(null,k)((function(t){var e=t.index,n=t.deleteRow,r=function t(){n(e),console.log(t)};return Object(R.jsx)("td",{className:"banner",children:Object(R.jsx)("button",{className:"remove-button",type:"submit",onClick:function(){return r()},children:"x"})})})),J=Object(i.b)((function(t){return{columns:t.matrix.settings.columns,rows:t.matrix.settings.rows,cells:t.matrix.settings.cells,arr:t.matrix.arr,matrixRows:t.matrix.matrixRows,sortedMatrix:t.matrix.sortedMatrix}}))((function(t){var e=t.columns,n=t.rows,s=t.cells,c=t.matrixRows,a=Object(r.useState)(-1),i=Object(o.a)(a,2),u=i[0],l=i[1];return Object(R.jsxs)("tbody",{children:[!!c&&c.map((function(t,e){return Object(R.jsxs)("tr",{children:[Object(R.jsx)("td",{className:"banner",children:e+1}),t.map((function(n){return Object(R.jsx)("td",{className:"table-item",children:u===e?Object(R.jsx)(y,{item:n,row:t}):Object(R.jsx)(W,{item:n,cells:s})},n.Amount)})),Object(R.jsx)(L,{row:t,handleMouseEnter:function(){return l(e)},handleMouseLeave:function(){return l(-1)}}),Object(R.jsx)(G,{index:e,matrixRows:c,rows:n})]},JSON.stringify(t))})),Object(R.jsx)(_,{matrixRows:c,columns:e,rows:n})]})})),X={addRow:p.addRow},B=Object(i.b)((function(t){return{rows:t.matrix.settings.rows,matrixRows:t.matrix.matrixRows}}),X)((function(t){var e=t.addRow,n=t.matrixRows;return Object(R.jsx)("div",{className:"btn-matrix",children:Object(R.jsx)("button",{className:"button btn-addrow",type:"button",onClick:function(){return e(n),void console.log(e)},children:"add row"})})})),q=Object(i.b)((function(t){return{settings:t.matrix.settings}}))((function(t){var e=t.settings;return Object(R.jsxs)("div",{className:"table",children:[e.columns&&e.rows&&e.cells&&Object(R.jsx)(B,{}),Object(R.jsx)("table",{className:"table-matrix",children:e.columns&&e.rows&&e.cells&&Object(R.jsxs)(R.Fragment,{children:[Object(R.jsx)(A,Object(u.a)({},e)),Object(R.jsx)(J,{})]})})]})})),z=(n(30),Object(i.b)((function(t){return{settings:t.matrix.settings}}))((function(t){var e=t.settings,n=Object(r.useState)(!1),s=Object(o.a)(n,2),c=s[0],a=s[1];return Object(r.useEffect)((function(){a(!0)}),[e]),Object(R.jsxs)(R.Fragment,{children:[Object(R.jsx)("section",{className:"section-form",children:Object(R.jsx)(C,{})}),Object(R.jsx)("section",{className:"section-table",children:c&&Object(R.jsx)(q,{})})]})}))),H=n(10),K=n(17),P={settings:{columns:"",rows:"",cells:""},matrixRows:[],sortedMatrix:[],nearest:[]},Q=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:P,e=arguments.length>1?arguments[1]:void 0,n=e.type,r=e.payload;switch(n){case O.SET_SETTINGS:return Object(u.a)(Object(u.a)({},t.settings),{},{settings:r.settings,matrixRows:r.matrix,sortedMatrix:r.sortedMatrix});case O.CREATE_MATRIX:return Object(u.a)(Object(u.a)({},t),{},{matrixRows:Object(x.a)(r)});case O.INCREMENT_CELL:var s=t.matrixRows.map((function(t){return t.map((function(t){return t.ID===r.ID?(t.Amount+=1,t):t}))}));return Object(u.a)(Object(u.a)({},t),{},{matrixRows:s,sortedMatrix:Object(x.a)(N(Object(x.a)(t.sortedMatrix)))});case O.DELETE_ROW:return Object(u.a)(Object(u.a)({},t),{},{sortedMatrix:Object(x.a)(N(Object(x.a)(t.sortedMatrix.filter((function(e){return t.matrixRows[r].every((function(t){return t.ID!==e.ID}))}))))),matrixRows:t.matrixRows.filter((function(t,e){return e!==r})),settings:Object(u.a)(Object(u.a)({},t.settings),{},{rows:t.settings.rows-1})});case O.ADD_ROW:var c=new Array(1*t.settings.columns).fill(0).map((function(){return h()}));return Object(u.a)(Object(u.a)({},t),{},{settings:Object(u.a)(Object(u.a)({},t.settings),{},{rows:t.settings.rows+1}),matrixRows:[].concat(Object(x.a)(t.matrixRows),[c]),sortedMatrix:Object(x.a)(N([].concat(Object(x.a)(t.sortedMatrix),Object(x.a)(c))))});case O.SET_NEAREST_CELLS:return Object(u.a)(Object(u.a)({},t),{},{nearest:Object(x.a)(r.nearest)});case O.RESET_NEAREST_CELLS:return Object(u.a)(Object(u.a)({},t),{},{nearest:P.nearest});default:return t}},U=Object(H.combineReducers)({matrix:Q}),V=Object(H.createStore)(U,Object(K.composeWithDevTools)());a.a.render(Object(R.jsx)(s.a.StrictMode,{children:Object(R.jsx)(i.a,{store:V,children:Object(R.jsx)(z,{})})}),document.getElementById("root"))}},[[31,1,2]]]);
//# sourceMappingURL=main.26fb6aff.chunk.js.map